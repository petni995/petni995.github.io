<!DOCTYPE html>
<html>
  <head>
    <title>Javascript Roguelike</title>
    <meta name="viewport"
  content="
    initial-scale = 0.9,
    minimum-scale = 0.9,
    maximum-scale = 0.9,
    user-scalable = no,
    target-densitydpi = device-dpi
    " />
    <style>
        body {
          background-color: white;
       }
</style>
  </head>
  <body>
    <script src="libraries/rot.js"></script>
    <script src="libraries/sprintf.min.js"></script>
    <script src="game.js"></script>
    <script src="assets/screens.js"></script>
    <script src="assets/glyph.js"></script>
    <script src="assets/tile.js"></script>
    <script src="assets/builder.js"></script>
    <script src="assets/map.js"></script>
    <script src="assets/entity.js"></script>
    <script src="assets/item.js"></script>
    <script src="assets/repository.js"></script>
    <script src="assets/entities.js"></script>
    <script src="assets/items.js"></script>
    <div id="console">
    </div>

    <input type="password" id="myInput" oninput="myFunction()" spellcheck="false" autocomplete="off">

    <script>
    function myFunction() {
        var x = document.getElementById("myInput").value;
        if (x == "j") {
          Game._currentScreen.handleInput('keydown', 'J')
          document.getElementById("myInput").value = ""
        } else if (x == "k") {
          Game._currentScreen.handleInput('keydown', 'K')
          document.getElementById("myInput").value = ""
        } else if (x == "h") {
          Game._currentScreen.handleInput('keydown', 'H')
          document.getElementById("myInput").value = ""
        } else if (x == "l") {
          Game._currentScreen.handleInput('keydown', 'L')
          document.getElementById("myInput").value = ""
        } else if (x == "y") {
          Game._currentScreen.handleInput('keydown', 'Y')
          document.getElementById("myInput").value = ""
        } else if (x == "u") {
          Game._currentScreen.handleInput('keydown', 'U')
          document.getElementById("myInput").value = ""
        } else if (x == "b") {
          Game._currentScreen.handleInput('keydown', 'B')
          document.getElementById("myInput").value = ""
        } else if (x == "n") {
          Game._currentScreen.handleInput('keydown', 'N')
          document.getElementById("myInput").value = ""
        } else if (x == "e") {
          Game._currentScreen.handleInput('keydown', 'return')
          document.getElementById("myInput").value = ""
        } else if (x == ">") {
          Game._currentScreen.handleInput('keypress', '>')
          document.getElementById("myInput").value = ""
        } else if (x == "<") {
          Game._currentScreen.handleInput('keypress', '<')
          document.getElementById("myInput").value = ""
        } else if (x == "w" && Game._currentScreen == Game.Screen.startScreen) {
          // switch of work mode - turn on mobile mode
          document.body.style.backgroundColor = 'black'
          // remove old display
          var foo = document.getElementById('console');
          while (foo.firstChild) foo.removeChild(foo.firstChild);
          //new display
          Game._display = new ROT.Display({widht: Game._screenWidth, height: Game._screenHeight + 1, bg: "black"});
          Game._display.setOptions({fontSize: 14});
          document.getElementById("console").appendChild(Game.getDisplay().getContainer());
          // setup tiles
          Game.Tile.floorTile["_background"] = "black"
          Game.Tile.wallTile["_background"] = "black"
          Game.Tile.stairsUpTile["_background"] = "black"
          Game.Tile.stairsUpTile["_foreground"] = "white"
          Game.Tile.stairsDownTile["_background"] = "black"
          Game.Tile.stairsDownTile["_foreground"] = "white"
          Game.PlayerTemplate["background"] = "black"
          Game.PlayerTemplate["foreground"] = "white"
          Game.FungusTemplate["background"] = "black"
          Game.FungusTemplate["foreground"] = "green"
          Game.Screen.playScreen._messagecolor = '%c{white}%b{black}'
          Game.switchScreen(Game.Screen.startScreen);

          document.getElementById("myInput").value = ""
        } else if (x == "+" && Game._currentScreen == Game.Screen.startScreen) {
          // switch of work mode - turn on laptop mode
          document.body.style.backgroundColor = 'black'
          // remove old display
          var foo = document.getElementById('console');
          while (foo.firstChild) foo.removeChild(foo.firstChild);
          //new display
          Game._display = new ROT.Display({widht: Game._screenWidth, height: Game._screenHeight + 1, bg: "black"});
          Game._display.setOptions({fontSize: 18});
          document.getElementById("console").appendChild(Game.getDisplay().getContainer());
          // setup tiles
          Game.Tile.floorTile["_background"] = "black"
          Game.Tile.wallTile["_background"] = "black"
          Game.Tile.stairsUpTile["_background"] = "black"
          Game.Tile.stairsUpTile["_foreground"] = "white"
          Game.Tile.stairsDownTile["_background"] = "black"
          Game.Tile.stairsDownTile["_foreground"] = "white"
          Game.PlayerTemplate["background"] = "black"
          Game.PlayerTemplate["foreground"] = "white"
          Game.Screen.playScreen._messagecolor = '%c{white}%b{black}'
          Game.switchScreen(Game.Screen.startScreen);

          document.getElementById("myInput").value = ""
        } else {
          document.getElementById("myInput").value = ""
        }

    }
    </script>

  </body>
</html>
